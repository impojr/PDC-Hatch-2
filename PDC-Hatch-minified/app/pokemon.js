import*as fs from"fs";import*as saveManager from"./save.js";export class Pokemon{constructor(e){var t=fs.readFileSync("/mnt/assets/resources/pokemon.json","json")[e-1];this.id=t.id,this.name=t.name,this.exp=0,this.dateHatched=null,this.dateRecieved=saveManager.formatDate(new Date),this.isGmax=!1,this.data=t,this.steps=0}}export function getNewPokemon(e){return new Pokemon(e)}function getLevelDouble(e){return Math.pow(e.exp,1/3)}export function getLevelInt(e){return Math.floor(getLevelDouble(e))}export function getNxtLvlPercent(e){var t=getLevelDouble(e);return t>=100?1:t<1?e.steps/1e4:t-Math.floor(t)}export function getLevel(e){var t=getLevelInt(e);return t>=100?"MAX":0==t?e.steps>=1e4?"L01":"EGG":t<10?"L0"+t:"L"+t}export function walk(e){console.log("data "+e),console.log("data.Steps "+e.Steps),console.log("data.SyncDate "+e.SyncDate),console.log("data.SyncTime "+e.SyncTime);var t=saveManager.loadState(),a=t.pokemon[0],n=isEgg(a);if(a.steps+=e.Steps,n){if(a.steps>=1e4){a.dateHatched=saveManager.formatDate(new Date);var s=a.steps-1e4;a.exp+=s}}else if(a.exp+=e.Steps,null!=a.data.evolves&&a.data.evolves<=getLevelInt(a)){var o=new Pokemon(a.data.into);a.id=o.id,a.name=o.name,a.data=o.data}else a.data.gmax&&!a.isGmax&&a.steps>5e5&&(a.isGmax=!0);t.lastSyncDate={SyncDate:e.SyncDate,SyncTime:e.SyncTime},saveManager.saveState(t)}export function getImg(e){return e.isGmax?e.id+"g":isEgg(e)?"0":e.id}export function getName(e){return isEgg(e)?"Egg":e.name}export function isEgg(e){return e.steps<1e4}